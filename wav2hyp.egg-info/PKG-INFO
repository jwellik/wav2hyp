Metadata-Version: 2.4
Name: wav2hyp
Version: 1.0.0
Summary: Waveform to Hypocenter processing pipeline for seismic data
Home-page: https://github.com/your-org/wav2hyp
Author: WAV2HYP Development Team
Author-email: WAV2HYP Development Team <support@example.com>
Maintainer-email: WAV2HYP Development Team <support@example.com>
License: MIT
Project-URL: Homepage, https://github.com/your-org/wav2hyp
Project-URL: Documentation, https://wav2hyp.readthedocs.io/
Project-URL: Repository, https://github.com/your-org/wav2hyp.git
Project-URL: Issues, https://github.com/your-org/wav2hyp/issues
Keywords: seismology,earthquake,phase-picking,event-association,earthquake-location,machine-learning,volcano-monitoring
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Physics
Classifier: Topic :: Scientific/Engineering :: Information Analysis
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.21.0
Requires-Dist: scipy>=1.7.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: matplotlib>=3.4.0
Requires-Dist: obspy>=1.3.0
Requires-Dist: seisbench>=0.4.0
Requires-Dist: pyocto>=0.1.0
Requires-Dist: torch>=1.9.0
Requires-Dist: PyYAML>=6.0
Requires-Dist: h5py>=3.3.0
Requires-Dist: pyasdf>=0.8.0
Requires-Dist: tqdm>=4.62.0
Requires-Dist: click>=8.0.0
Provides-Extra: mapping
Requires-Dist: cartopy>=0.20.0; extra == "mapping"
Provides-Extra: jupyter
Requires-Dist: jupyter>=1.0.0; extra == "jupyter"
Requires-Dist: ipython>=7.0.0; extra == "jupyter"
Provides-Extra: dev
Requires-Dist: pytest>=6.0.0; extra == "dev"
Requires-Dist: pytest-cov>=2.12.0; extra == "dev"
Requires-Dist: black>=21.0.0; extra == "dev"
Requires-Dist: flake8>=3.9.0; extra == "dev"
Provides-Extra: docs
Requires-Dist: sphinx>=4.0.0; extra == "docs"
Requires-Dist: sphinx-rtd-theme>=0.5.0; extra == "docs"
Provides-Extra: all
Requires-Dist: wav2hyp[dev,docs,jupyter,mapping]; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: requires-python

# WAV2HYP: Waveform to Hypocenter Processing Pipeline

A comprehensive seismic processing pipeline that transforms continuous waveform data into earthquake hypocenters through automated phase picking, event association, and probabilistic location.

## Features

- **Automated Phase Picking**: Uses EQTransformer with VolPick model optimized for volcanic seismicity
- **Event Association**: Groups phase picks into earthquake events using PyOcto
- **Earthquake Location**: Refines locations using NonLinLoc probabilistic method
- **Flexible Configuration**: YAML-based configuration system
- **Multiple Interfaces**: Both CLI and script interfaces available
- **Comprehensive Logging**: Configurable logging with file and console output

## Installation

### Development Installation

We recommend installing wav2hyp with a package manager like [conda](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html).

```bash
# Create a conda environment with Python 3.12
conda create -n wav2hyp python=3.12

# Activate the environment before installing dependencies
conda activate wav2hyp
```


```bash
# Clone or navigate to the wav2hyp-basic directory
cd wav2hyp

# Install in development mode
pip install -e .
```

### Dependencies

The package requires several scientific Python packages. Install dependencies with:

```bash
pip install -r requirements.txt
```

Key dependencies include:
- ObsPy for seismic data handling
- SeisBench for machine learning phase picking
- PyOcto for event association
- NonLinLoc (nllpy) for earthquake location
- vdapseisutils for VDAP-specific utilities

## Usage

### Command Line Interface

```bash
# Basic usage
wav2hyp -c examples/spurr.yaml --t1 "2024/10/14" --t2 "2024/10/15"

# Skip certain processing steps
wav2hyp -c examples/spurr.yaml --t1 "2024/10/14" --t2 "2024/10/15" --skip-picker

# Verbose output
wav2hyp -c examples/spurr.yaml --t1 "2024/10/14" --t2 "2024/10/15" --verbose
```

### Script Interface

```bash
# Equivalent to CLI usage
python run_wav2hyp.py -c examples/spurr.yaml --t1 "2024/10/14" --t2 "2024/10/15"
```

### Python API

```python
from wav2hyp import WAV2HYP
from obspy import UTCDateTime

# Initialize processor with configuration
processor = WAV2HYP('examples/config.yaml')

# Run processing
catalog = processor.run(
    UTCDateTime('2024/10/14'),
    UTCDateTime('2024/10/15')
)

print(f"Processed {len(catalog)} events")
```

## Configuration

The pipeline uses YAML configuration files. See `examples/config.yaml` for a complete example.

### Key Configuration Sections

- **target**: Study area (volcano/region) information
- **waveform_client**: FDSN data center settings
- **inventory**: Station inventory file location
- **output**: Output directory structure and logging
- **picker**: EQTransformer model and threshold settings
- **associator**: PyOcto association parameters
- **locator**: NonLinLoc location settings

### Output Structure

```
results/
├── logs/                    # Processing logs
├── picks/                   # Phase picking results (HDF5)
├── associations/            # Event association results (HDF5/PyASDF)
├── locations/               # Location results (HDF5/PyASDF)
│   └── nll_<target>/        # NonLinLoc working directories
└── <target>_inventory.xml   # Station inventory
```

## Command Line Options

- `-c, --config`: Path to YAML configuration file (required)
- `--t1`: Start time (YYYY/MM/DD or YYYY/MM/DD HH:MM:SS) (required)
- `--t2`: End time (YYYY/MM/DD or YYYY/MM/DD HH:MM:SS) (required)
- `--skip-picker`: Skip phase picking step
- `--skip-associator`: Skip event association step  
- `--skip-locator`: Skip earthquake location step
- `--verbose, -v`: Enable verbose output
- `--quiet, -q`: Suppress output except errors
- `--version`: Show version information

## Processing Workflow

1. **Phase Picking**: Downloads continuous waveform data and applies EQTransformer to detect P and S wave arrivals
2. **Event Association**: Groups individual picks into earthquake events using travel time predictions
3. **Location**: Refines event locations using NonLinLoc with probabilistic uncertainty estimates

## Examples

See the `examples/` directory for:
- `config.yaml`: Complete configuration example for Mount St. Helens
- Additional configuration templates for different scenarios

## Development

### Package Structure

```
wav2hyp/
├── __init__.py          # Package initialization
├── core.py              # Main processing classes
├── cli.py               # Command-line interface
├── config_loader.py     # Configuration handling
└── utils/               # Utility modules
    ├── __init__.py
    ├── geo.py           # Geographic calculations
    └── sb.py            # SeisBench extensions
```

### Testing

```bash
# Install development dependencies
pip install -e ".[dev]"

# Run tests
pytest

# Run with coverage
pytest --cov=wav2hyp
```

## License

MIT License - see LICENSE file for details.

## Contributing

Contributions welcome! Please see the contributing guidelines and open an issue or pull request.

## Citation

If you use WAV2HYP in your research, please cite:

```
WAV2HYP: Waveform to Hypocenter Processing Pipeline
Version 1.0.0
https://github.com/your-org/wav2hyp
```
